FROM sharmaatul11/fsl502py369ltx-full:latest
RUN apt update
#COPY scct_strippedResampled1.nii.gz   /templatenifti/
#COPY  midlinecssfResampled1.nii.gz   /templatemasks/
RUN mkdir -p /callfromgithub
RUN chmod 755 /callfromgithub
COPY downloadcodefromgithub.sh /callfromgithub/
RUN chmod +x /callfromgithub/downloadcodefromgithub.sh
RUN apt install -y \
  dcm2niix  \ 
  vim  \ 
  zip  \ 
  unzip  \ 
  curl  \ 
  git \
  tree  \
  itk
RUN pip3 install \
  nibabel  \ 
  numpy  \ 
  xmltodict  \ 
  pandas  \ 
  requests  \ 
  pydicom  \ 
  python-gdcm  \ 
  glob2  \ 
  scipy  \ 
  pypng  \
  PyGithub 
LABEL org.nrg.commands="[{\"name\": \"combinecsvsNcopypdf_ICH\", \"description\": \"ATUL : Launch combinecsvsNcopypdf_ICH containers on a batch of subjects\", \"version\": \"1.0\", \"schema-version\": \"1.0\", \"image\": \"registry.nrg.wustl.edu/docker/nrg-repo/sharmaatul11/fsl502py369withpacksnltx:latest\", \"type\": \"docker\", \"command-line\": \"/callfromgithub/downloadcodefromgithub.sh #PROJECT#  \$XNAT_USER \$XNAT_PASS https://github.com/dharlabwustl/EDEMA_MARKERS_PROD.git 9  https://snipr.wustl.edu  \", \"override-entrypoint\": true, \"mounts\": [{\"name\": \"out\", \"writable\": true, \"path\": \"/output\"}, {\"name\": \"in\", \"writable\": false, \"path\": \"/input\"}, {\"name\": \"ZIPFILEDIR\", \"writable\": true, \"path\": \"/ZIPFILEDIR\"}, {\"name\": \"software\", \"writable\": true, \"path\": \"/software\"}, {\"name\": \"NIFTIFILEDIR\", \"writable\": true, \"path\": \"/NIFTIFILEDIR\"}, {\"name\": \"DICOMFILEDIR\", \"writable\": true, \"path\": \"/DICOMFILEDIR\"}, {\"name\": \"working\", \"writable\": true, \"path\": \"/working\"}, {\"name\": \"workinginput\", \"writable\": true, \"path\": \"/workinginput\"}, {\"name\": \"workingoutput\", \"writable\": true, \"path\": \"/workingoutput\"}, {\"name\": \"outputinsidedocker\", \"writable\": true, \"path\": \"/outputinsidedocker\"}, {\"name\": \"workingdir\", \"writable\": true, \"path\": \"/workingdir\"}], \"environment-variables\": {}, \"ports\": {}, \"inputs\": [{\"name\": \"PROJECT\", \"type\": \"string\", \"required\": true, \"select-values\": []}], \"outputs\": [], \"xnat\": [{\"name\": \"combinecsvsNcopypdf_ICH\", \"label\": \"combinecsvsNcopypdf_ICH batch\", \"description\": \"ATUL : Launch combinecsvsNcopypdf_ICH-sessions-batch-subject on all subjects in a project\", \"contexts\": [\"xnat:projectData\"], \"external-inputs\": [{\"name\": \"project\", \"description\": \"Input project\", \"type\": \"Project\", \"required\": true, \"load-children\": false}], \"derived-inputs\": [{\"name\": \"project-id\", \"type\": \"string\", \"required\": true, \"provides-value-for-command-input\": \"PROJECT\", \"user-settable\": false, \"load-children\": true, \"derived-from-wrapper-input\": \"project\", \"derived-from-xnat-object-property\": \"id\", \"multiple\": false}], \"output-handlers\": []}], \"container-labels\": {}, \"generic-resources\": {}, \"ulimits\": {}, \"secrets\": []}, \
	{\"name\": \"combinecsvsNcopypdf\", \"description\": \"ATUL : Launch combinecsvsNcopypdf containers on a batch of subjects\", \"version\": \"1.0\", \"schema-version\": \"1.0\", \"image\": \"registry.nrg.wustl.edu/docker/nrg-repo/sharmaatul11/fsl502py369withpacksnltx:latest\", \"type\": \"docker\", \"command-line\": \"/callfromgithub/downloadcodefromgithub.sh #PROJECT#  \$XNAT_USER \$XNAT_PASS https://github.com/dharlabwustl/EDEMA_MARKERS_PROD.git 3  https://snipr.wustl.edu  \", \"override-entrypoint\": true, \"mounts\": [{\"name\": \"out\", \"writable\": true, \"path\": \"/output\"}, {\"name\": \"in\", \"writable\": false, \"path\": \"/input\"}, {\"name\": \"ZIPFILEDIR\", \"writable\": true, \"path\": \"/ZIPFILEDIR\"}, {\"name\": \"software\", \"writable\": true, \"path\": \"/software\"}, {\"name\": \"NIFTIFILEDIR\", \"writable\": true, \"path\": \"/NIFTIFILEDIR\"}, {\"name\": \"DICOMFILEDIR\", \"writable\": true, \"path\": \"/DICOMFILEDIR\"}, {\"name\": \"working\", \"writable\": true, \"path\": \"/working\"}, {\"name\": \"workinginput\", \"writable\": true, \"path\": \"/workinginput\"}, {\"name\": \"workingoutput\", \"writable\": true, \"path\": \"/workingoutput\"}, {\"name\": \"outputinsidedocker\", \"writable\": true, \"path\": \"/outputinsidedocker\"}, {\"name\": \"workingdir\", \"writable\": true, \"path\": \"/workingdir\"}], \"environment-variables\": {}, \"ports\": {}, \"inputs\": [{\"name\": \"PROJECT\", \"type\": \"string\", \"required\": true, \"select-values\": []}], \"outputs\": [], \"xnat\": [{\"name\": \"combinecsvsNcopypdf\", \"label\": \"combinecsvsNcopypdf batch\", \"description\": \"ATUL : Launch combinecsvsNcopypdf-sessions-batch-subject on all subjects in a project\", \"contexts\": [\"xnat:projectData\"], \"external-inputs\": [{\"name\": \"project\", \"description\": \"Input project\", \"type\": \"Project\", \"required\": true, \"load-children\": false}], \"derived-inputs\": [{\"name\": \"project-id\", \"type\": \"string\", \"required\": true, \"provides-value-for-command-input\": \"PROJECT\", \"user-settable\": false, \"load-children\": true, \"derived-from-wrapper-input\": \"project\", \"derived-from-xnat-object-property\": \"id\", \"multiple\": false}], \"output-handlers\": []}], \"container-labels\": {}, \"generic-resources\": {}, \"ulimits\": {}, \"secrets\": []}, \
	{\"name\": \"dicom2niftiusingGitHub\", \"description\": \"Apply dicom2niftiusingGitHub\", \"version\": \"1.0\", \"schema-version\": \"1.0\", \"image\": \"registry.nrg.wustl.edu/docker/nrg-repo/sharmaatul11/fsl502py369withpacksnltx:latest\", \"type\": \"docker\", \"working-directory\": \"/callfromgithub\", \"command-line\": \" /callfromgithub/downloadcodefromgithub.sh #SESSION_ID#  \$XNAT_USER \$XNAT_PASS https://github.com/dharlabwustl/EDEMA_MARKERS_PROD.git 1  https://snipr.wustl.edu\", \"override-entrypoint\": true, \"mounts\": [{\"name\": \"out\", \"writable\": true, \"path\": \"/output\"}, {\"name\": \"in\", \"writable\": false, \"path\": \"/input\"}, {\"name\": \"ZIPFILEDIR\", \"writable\": true, \"path\": \"/ZIPFILEDIR\"}, {\"name\": \"software\", \"writable\": true, \"path\": \"/software\"}, {\"name\": \"NIFTIFILEDIR\", \"writable\": true, \"path\": \"/NIFTIFILEDIR\"}, {\"name\": \"DICOMFILEDIR\", \"writable\": true, \"path\": \"/DICOMFILEDIR\"}, {\"name\": \"working\", \"writable\": true, \"path\": \"/working\"}, {\"name\": \"workinginput\", \"writable\": true, \"path\": \"/workinginput\"}, {\"name\": \"workingoutput\", \"writable\": true, \"path\": \"/workingoutput\"}, {\"name\": \"outputinsidedocker\", \"writable\": true, \"path\": \"/outputinsidedocker\"}], \"environment-variables\": {}, \"ports\": {}, \"inputs\": [{\"name\": \"SESSION_ID\", \"type\": \"string\", \"required\": true, \"select-values\": []}, {\"name\": \"PROJECT\", \"type\": \"string\", \"required\": true, \"select-values\": []}], \"outputs\": [], \"xnat\": [{\"name\": \"dicom2niftiusingGitHub\", \"label\": \"dicom2niftiusingGitHub batch\", \"description\": \"dicom2niftiusingGitHub\", \"contexts\": [\"xnat:imageSessionData\"], \"external-inputs\": [{\"name\": \"session\", \"description\": \"Input session\", \"type\": \"Session\", \"required\": true, \"load-children\": false}], \"derived-inputs\": [{\"name\": \"project\", \"type\": \"string\", \"required\": true, \"provides-value-for-command-input\": \"PROJECT\", \"user-settable\": false, \"load-children\": true, \"derived-from-wrapper-input\": \"session\", \"derived-from-xnat-object-property\": \"project-id\", \"multiple\": false}, {\"name\": \"session-id\", \"type\": \"string\", \"required\": true, \"provides-value-for-command-input\": \"SESSION_ID\", \"user-settable\": false, \"load-children\": true, \"derived-from-wrapper-input\": \"session\", \"derived-from-xnat-object-property\": \"id\", \"multiple\": false}], \"output-handlers\": []}], \"reserve-memory\": 8000, \"limit-memory\": 16000, \"container-labels\": {}, \"generic-resources\": {}, \"ulimits\": {}, \"secrets\": []}, \
	{\"name\": \"edema_biomarkers_allstepsSessionUsingGitHub\", \"description\": \"Apply edema_biomarkers_allstepsSessionUsingGitHub\", \"version\": \"1.0\", \"schema-version\": \"1.0\", \"image\": \"registry.nrg.wustl.edu/docker/nrg-repo/sharmaatul11/fsl502py369withpacksnltx:latest\", \"type\": \"docker\", \"working-directory\": \"/callfromgithub\", \"command-line\": \" /callfromgithub/downloadcodefromgithub.sh #SESSION_ID# \$XNAT_USER \$XNAT_PASS https://github.com/dharlabwustl/EDEMA_MARKERS_PROD.git 2  https://snipr.wustl.edu\", \"override-entrypoint\": true, \"mounts\": [{\"name\": \"out\", \"writable\": true, \"path\": \"/output\"}, {\"name\": \"in\", \"writable\": false, \"path\": \"/input\"}, {\"name\": \"ZIPFILEDIR\", \"writable\": true, \"path\": \"/ZIPFILEDIR\"}, {\"name\": \"software\", \"writable\": true, \"path\": \"/software\"}, {\"name\": \"NIFTIFILEDIR\", \"writable\": true, \"path\": \"/NIFTIFILEDIR\"}, {\"name\": \"DICOMFILEDIR\", \"writable\": true, \"path\": \"/DICOMFILEDIR\"}, {\"name\": \"working\", \"writable\": true, \"path\": \"/working\"}, {\"name\": \"workinginput\", \"writable\": true, \"path\": \"/workinginput\"}, {\"name\": \"workingoutput\", \"writable\": true, \"path\": \"/workingoutput\"}, {\"name\": \"outputinsidedocker\", \"writable\": true, \"path\": \"/outputinsidedocker\"}], \"environment-variables\": {}, \"ports\": {}, \"inputs\": [{\"name\": \"SESSION_ID\", \"type\": \"string\", \"required\": true, \"select-values\": []}, {\"name\": \"PROJECT\", \"type\": \"string\", \"required\": true, \"select-values\": []}], \"outputs\": [], \"xnat\": [{\"name\": \"edema_biomarkers_allstepsSessionUsingGitHub\", \"label\": \"edema_biomarkers_allstepsSessionUsingGitHub batch\", \"description\": \"edema_biomarkers_allstepsSessionUsingGitHub\", \"contexts\": [\"xnat:imageSessionData\"], \"external-inputs\": [{\"name\": \"session\", \"description\": \"Input session\", \"type\": \"Session\", \"required\": true, \"load-children\": false}], \"derived-inputs\": [{\"name\": \"project\", \"type\": \"string\", \"required\": true, \"provides-value-for-command-input\": \"PROJECT\", \"user-settable\": false, \"load-children\": true, \"derived-from-wrapper-input\": \"session\", \"derived-from-xnat-object-property\": \"project-id\", \"multiple\": false}, {\"name\": \"session-id\", \"type\": \"string\", \"required\": true, \"provides-value-for-command-input\": \"SESSION_ID\", \"user-settable\": false, \"load-children\": true, \"derived-from-wrapper-input\": \"session\", \"derived-from-xnat-object-property\": \"id\", \"multiple\": false}], \"output-handlers\": []}], \"reserve-memory\": 8000, \"limit-memory\": 16000, \"container-labels\": {}, \"generic-resources\": {}, \"ulimits\": {}, \"secrets\": []}, \
	{\"name\": \"edema_biomarkers_scanlevel\", \"description\": \"Apply edema_biomarkers_scanlevel\", \"version\": \"1.0\", \"schema-version\": \"1.0\", \"image\": \"registry.nrg.wustl.edu/docker/nrg-repo/sharmaatul11/fsl502py369withpacksnltx:latest\", \"type\": \"docker\", \"working-directory\": \"/software\", \"command-line\": \"  /callfromgithub/downloadcodefromgithub.sh #SESSION_ID# \$XNAT_USER \$XNAT_PASS https://github.com/dharlabwustl/EDEMA_MARKERS_PROD.git 4  https://snipr.wustl.edu\", \"override-entrypoint\": true, \"mounts\": [{\"name\": \"out\", \"writable\": true, \"path\": \"/output\"}, {\"name\": \"in\", \"writable\": false, \"path\": \"/input\"}, {\"name\": \"ZIPFILEDIR\", \"writable\": true, \"path\": \"/ZIPFILEDIR\"}, {\"name\": \"software\", \"writable\": true, \"path\": \"/software\"}, {\"name\": \"NIFTIFILEDIR\", \"writable\": true, \"path\": \"/NIFTIFILEDIR\"}, {\"name\": \"DICOMFILEDIR\", \"writable\": true, \"path\": \"/DICOMFILEDIR\"}, {\"name\": \"working\", \"writable\": true, \"path\": \"/working\"}, {\"name\": \"workinginput\", \"writable\": true, \"path\": \"/workinginput\"}, {\"name\": \"workingoutput\", \"writable\": true, \"path\": \"/workingoutput\"}, {\"name\": \"outputinsidedocker\", \"writable\": true, \"path\": \"/outputinsidedocker\"}, {\"name\": \"workingdir\", \"writable\": true, \"path\": \"/workingdir\"}], \"environment-variables\": {}, \"ports\": {}, \"inputs\": [{\"name\": \"SESSION_ID\", \"type\": \"string\", \"required\": true, \"select-values\": []}, {\"name\": \"SCAN_ID\", \"type\": \"string\", \"required\": true, \"select-values\": []}], \"outputs\": [{\"name\": \"output\", \"description\": \"The command's stdout\", \"required\": true, \"mount\": \"out\"}], \"xnat\": [{\"name\": \"edema_biomarkers_scanlevel\", \"label\": \"edema_biomarkers_scanlevel batch\", \"description\": \"Apply edema_biomarkers_scanlevel\", \"contexts\": [\"xnat:imageScanData\"], \"external-inputs\": [{\"name\": \"scan\", \"description\": \"Input scan\", \"type\": \"Scan\", \"required\": true, \"provides-files-for-command-mount\": \"in\", \"load-children\": false}], \"derived-inputs\": [{\"name\": \"session\", \"type\": \"string\", \"required\": true, \"provides-value-for-command-input\": \"SESSION_ID\", \"user-settable\": false, \"load-children\": true, \"derived-from-wrapper-input\": \"scan\", \"derived-from-xnat-object-property\": \"session-id\", \"multiple\": false}, {\"name\": \"scan-id\", \"type\": \"string\", \"required\": true, \"provides-value-for-command-input\": \"SCAN_ID\", \"user-settable\": false, \"load-children\": true, \"derived-from-wrapper-input\": \"scan\", \"derived-from-xnat-object-property\": \"id\", \"multiple\": false}], \"output-handlers\": [{\"name\": \"output-resource\", \"accepts-command-output\": \"output\", \"as-a-child-of\": \"scan\", \"type\": \"Resource\", \"label\": \"EDEMA_BIOMARKER\", \"tags\": []}]}], \"reserve-memory\": 8000, \"limit-memory\": 16000, \"container-labels\": {}, \"generic-resources\": {}, \"ulimits\": {}, \"secrets\": []}]"
